<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Manual - Serial Data Logger and Plotter v2.0</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 20px; color: #333; }
        h1 { color: #2c3e50; border-bottom: 3px solid #3498db; padding-bottom: 10px; }
        h2 { color: #2980b9; margin-top: 30px; border-bottom: 2px solid #3498db; padding-bottom: 5px; }
        h3 { color: #16a085; margin-top: 20px; }
        code { background-color: #f4f4f4; padding: 2px 6px; border-radius: 3px; font-family: 'Courier New', monospace; }
        pre { background-color: #f4f4f4; padding: 10px; border-left: 4px solid #3498db; overflow-x: auto; }
        table { border-collapse: collapse; width: 100%; margin: 15px 0; }
        table, th, td { border: 1px solid #ddd; }
        th { background-color: #3498db; color: white; padding: 10px; text-align: left; }
        td { padding: 8px; }
        tr:nth-child(even) { background-color: #f9f9f9; }
        .warning { background-color: #fff3cd; border-left: 4px solid #ffc107; padding: 10px; margin: 15px 0; }
        .info { background-color: #d1ecf1; border-left: 4px solid #17a2b8; padding: 10px; margin: 15px 0; }
        .success { background-color: #d4edda; border-left: 4px solid #28a745; padding: 10px; margin: 15px 0; }
        .error { background-color: #f8d7da; border-left: 4px solid #dc3545; padding: 10px; margin: 15px 0; }
        ul, ol { margin-left: 20px; }
    </style>
</head>
<body>

<h1>Serial Data Logger and Plotter - User Manual</h1>
<p><strong>Version 2.0</strong> | February 2026</p>
<p><strong>Contact:</strong> Uwe Hasenstab and Alexander Waal</p>

<hr>

<h2>Table of Contents</h2>
<ol>
    <li>Introduction</li>
    <li>Getting Started</li>
    <li>Main Interface Overview</li>
    <li>Connection Settings</li>
    <li>Data Logging</li>
    <li>Live Plotting</li>
    <li>Data Format Specification</li>
    <li>Error Codes Reference</li>
    <li>Troubleshooting Guide</li>
    <li>Frequently Asked Questions</li>
    <li>Advanced Features</li>
    <li>Technical Information</li>
</ol>

<hr>

<h2>1. Introduction</h2>

<h3>1.1 Purpose</h3>
<p>The Serial Data Logger and Plotter is a professional data acquisition system designed for fatigue testing equipment. It provides real-time visualization and comprehensive data logging capabilities for test engineers and laboratory technicians.</p>

<h3>1.2 Key Features</h3>
<ul>
    <li><strong>Real-time Data Acquisition:</strong> Receives serial data at 0.1 to 1.0 second intervals</li>
    <li><strong>Three Live Plots:</strong> Forces, Travel measurements, and Loss of Stiffness monitoring</li>
    <li><strong>Automatic CSV Logging:</strong> Timestamp-based filenames with automatic file management</li>
    <li><strong>Loss of Stiffness Calculation:</strong> Automatic calculation and visualization</li>
    <li><strong>Watchdog Timer:</strong> Connection monitoring and timeout detection</li>
    <li><strong>Mock Data Mode:</strong> Test the application without hardware</li>
    <li><strong>Unlimited Data Points:</strong> No artificial limits on test duration</li>
    <li><strong>Negative Value Support:</strong> Handles negative forces and positions</li>
</ul>

<h3>1.3 What's New in Version 2.0</h3>
<ul>
    <li>Default baudrate changed to <strong>115200</strong> (was 9600)</li>
    <li>Added comprehensive User Manual</li>
    <li>Enhanced Help menu system</li>
    <li>Support for negative force and position values</li>
    <li>Unlimited data points (no cutoff)</li>
    <li>Loss of Stiffness calculation and dedicated Plot 3</li>
</ul>

<hr>

<h2>2. Getting Started</h2>

<h3>2.1 Quick Start Guide</h3>
<div class="info">
<strong>5-Minute Quick Start:</strong>
<ol>
    <li>Connect your fatigue test equipment to a COM port</li>
    <li>Launch: <code>python main_application.py</code></li>
    <li>Select the COM port from the dropdown</li>
    <li>Verify baudrate is set to <strong>115200</strong></li>
    <li>Click <strong>Connect</strong></li>
    <li>Watch the three plots update in real-time</li>
    <li>Data is automatically saved to CSV in the logs/ directory</li>
</ol>
</div>

<h3>2.2 Testing Without Hardware (Mock Mode)</h3>
<div class="success">
<strong>Testing Tip:</strong> Use Mock Data mode to familiarize yourself with the application.
<ol>
    <li>Check the <strong>"Use Mock Data (Testing)"</strong> checkbox</li>
    <li>Click <strong>Connect</strong></li>
    <li>Observe simulated data appearing in all three plots</li>
    <li>Experiment with controls and settings</li>
</ol>
</div>

<hr>

<h2>3. Main Interface Overview</h2>

<h3>3.1 Window Layout</h3>

<h4>Left Panel - Controls</h4>
<ul>
    <li><strong>Connection Settings:</strong> COM port, baudrate, connect/disconnect</li>
    <li><strong>Data Logging:</strong> Current log file, save options</li>
    <li><strong>Plot Settings:</strong> Update interval, auto-range, clear plots</li>
    <li><strong>Statistics:</strong> Real-time operation statistics</li>
    <li><strong>Status Log:</strong> Messages, errors, and events</li>
</ul>

<h4>Right Panel - Visualization</h4>
<ul>
    <li><strong>Plot 1:</strong> Forces (Lower Force and Upper Force vs. Cycles)</li>
    <li><strong>Plot 2:</strong> Travel Measurements (3 traces vs. Cycles)</li>
    <li><strong>Plot 3:</strong> Loss of Stiffness (Percentage vs. Cycles)</li>
</ul>

<hr>

<h2>4. Connection Settings</h2>

<h3>4.1 Baudrate Configuration</h3>
<p><strong>Default:</strong> 115200 (v2.0)</p>
<p><strong>Available Options:</strong> 4800, 9600, 19200, 38400, 57600, 115200</p>

<div class="warning">
<strong>Important:</strong> The baudrate must match the settings of your fatigue testing equipment. Mismatched baudrates will result in parse errors or no data reception.
</div>

<h3>4.2 Connecting and Disconnecting</h3>

<h4>To Connect:</h4>
<ol>
    <li>Select COM port</li>
    <li>Select baudrate (usually 115200)</li>
    <li>Click <strong>Connect</strong> button</li>
    <li>Button changes to red and displays "Disconnect"</li>
    <li>A new log file is automatically created</li>
    <li>Plots begin updating as data arrives</li>
</ol>

<hr>

<h2>5. Data Logging</h2>

<h3>5.1 Automatic Logging</h3>
<p>When you connect, the application automatically:</p>
<ul>
    <li>Creates a new CSV file in the logs/ directory</li>
    <li>Names the file with timestamp: fatigue_test_YYYYMMDD_HHMMSS.csv</li>
    <li>Logs every valid data point received</li>
    <li>Never overwrites existing files (adds _01, _02 suffix if needed)</li>
</ul>

<hr>

<h2>6. Live Plotting</h2>

<h3>6.1 Plot Descriptions</h3>

<h4>Plot 1: Forces vs. Cycles</h4>
<ul>
    <li><strong>Blue line:</strong> Lower Force [N]</li>
    <li><strong>Red line:</strong> Upper Force [N]</li>
</ul>

<h4>Plot 2: Travel Measurements vs. Cycles</h4>
<ul>
    <li><strong>Green line:</strong> Travel at Upper Force [mm]</li>
    <li><strong>Cyan line:</strong> Additional Travel 1 [mm]</li>
    <li><strong>Magenta line:</strong> Additional Travel 2 [mm]</li>
</ul>

<h4>Plot 3: Loss of Stiffness vs. Cycles</h4>
<ul>
    <li><strong>Orange line:</strong> Loss of Stiffness [%]</li>
    <li><strong>Calculation:</strong> (Travel_2 / Travel_at_Upper) × 100</li>
</ul>

<hr>

<h2>7. Data Format Specification</h2>

<h3>7.1 Serial Data Format</h3>
<pre>
DTA;31422;182;263;0;793;2238;0;611;0;!
</pre>

<p>11 semicolon-separated fields ending with "!"</p>

<table>
    <tr>
        <th>Field</th>
        <th>Name</th>
        <th>Conversion</th>
        <th>Example</th>
    </tr>
    <tr><td>1</td><td>Status</td><td>None</td><td>DTA or END</td></tr>
    <tr><td>2</td><td>Cycles</td><td>None</td><td>31422</td></tr>
    <tr><td>3</td><td>Position 1</td><td>÷ 100 = mm</td><td>182 → 1.82 mm</td></tr>
    <tr><td>4</td><td>Force Lower</td><td>÷ 10 = N</td><td>263 → 26.3 N</td></tr>
    <tr><td>5</td><td>Travel 1</td><td>÷ 100 = mm</td><td>0 → 0.00 mm</td></tr>
    <tr><td>6</td><td>Position 2</td><td>÷ 100 = mm</td><td>793 → 7.93 mm</td></tr>
    <tr><td>7</td><td>Force Upper</td><td>÷ 10 = N</td><td>2238 → 223.8 N</td></tr>
    <tr><td>8</td><td>Travel 2</td><td>÷ 100 = mm</td><td>0 → 0.00 mm</td></tr>
    <tr><td>9</td><td>Travel at Upper</td><td>÷ 100 = mm</td><td>611 → 6.11 mm</td></tr>
    <tr><td>10</td><td>Error Code</td><td>None</td><td>0</td></tr>
    <tr><td>11</td><td>End Marker</td><td>None</td><td>!</td></tr>
</table>

<hr>

<h2>8. Error Codes Reference</h2>

<table>
    <tr><th>Code</th><th>Description</th><th>Action</th></tr>
    <tr style="background-color: #d4edda;">
        <td>000</td><td>No Error: Everything is OK</td><td>Normal operation</td>
    </tr>
    <tr style="background-color: #fff3cd;">
        <td>010</td><td>Test completed with an error</td><td>Review test parameters</td>
    </tr>
    <tr style="background-color: #fff3cd;">
        <td>011</td><td>Additional path 1 exceeded tolerance</td><td>Check path limits</td>
    </tr>
    <tr style="background-color: #fff3cd;">
        <td>012</td><td>Additional path 2 exceeded tolerance</td><td>Check path limits</td>
    </tr>
    <tr style="background-color: #f8d7da;">
        <td>101</td><td>Voice Coil drive initialization failed</td><td>Power cycle equipment</td>
    </tr>
    <tr style="background-color: #f8d7da;">
        <td>102</td><td>Communication error with Voice Coil</td><td>Check motor connections</td>
    </tr>
    <tr style="background-color: #f8d7da;">
        <td>103</td><td>No reference position set</td><td>Press Zero Point button</td>
    </tr>
</table>

<hr>

<h2>9. Troubleshooting Guide</h2>

<h3>9.1 Connection Issues</h3>

<h4>Problem: "Failed to connect" error</h4>
<div class="error">
<strong>Solutions:</strong>
<ol>
    <li><strong>Wrong COM port:</strong> Verify in Device Manager (Windows) or dmesg (Linux)</li>
    <li><strong>Incorrect baudrate:</strong> Ensure matches equipment (usually 115200)</li>
    <li><strong>Port in use:</strong> Close other applications using the port</li>
    <li><strong>Permissions (Linux):</strong> Run: <code>sudo usermod -a -G dialout $USER</code>, then log out/in</li>
    <li><strong>Missing drivers:</strong> Install USB-to-Serial drivers (FTDI, Prolific, CH340)</li>
</ol>
</div>

<h4>Problem: Connection successful but no data</h4>
<div class="warning">
<strong>Solutions:</strong>
<ol>
    <li>Verify equipment is powered on and transmitting</li>
    <li>Check cable connections</li>
    <li>Try different baudrates (9600, 19200, 38400, 57600, 115200)</li>
    <li>Consult equipment manual for correct settings</li>
</ol>
</div>

<h3>9.2 Data Issues</h3>

<h4>Problem: Parse errors appearing</h4>
<div class="warning">
<strong>Causes & Solutions:</strong>
<ol>
    <li><strong>Baudrate mismatch:</strong> Change baudrate to match equipment</li>
    <li><strong>Wrong data format:</strong> Check Raw_Data column in CSV</li>
    <li><strong>Electrical noise:</strong> Use shielded cables, avoid power cables</li>
    <li><strong>Equipment issue:</strong> Contact manufacturer, check firmware</li>
</ol>
</div>

<h4>Problem: Watchdog timeout warnings</h4>
<div class="error">
<strong>Message:</strong> "No data received for 5 seconds!"
<strong>Solutions:</strong>
<ol>
    <li>Check if test is still running on equipment</li>
    <li>Verify cable connections</li>
    <li>Check equipment display for errors</li>
    <li>Disconnect and reconnect</li>
</ol>
</div>

<h3>9.3 Plotting Issues</h3>

<h4>Problem: Plots not updating</h4>
<div class="info">
<strong>Checklist:</strong>
<ol>
    <li>Verify "Connected and logging" in status bar</li>
    <li>Check "Lines Received" counter is increasing</li>
    <li>Check "Points Plotted" counter is increasing</li>
    <li>Verify "Auto Range" is enabled</li>
    <li>Try "Clear Plots" and watch for new data</li>
</ol>
</div>

<h4>Problem: Plots appear laggy</h4>
<div class="success">
<strong>Solutions:</strong>
<ol>
    <li>Increase Update Interval to 2000-3000 ms</li>
    <li>Close other resource-intensive applications</li>
    <li>For very long tests, consider starting a new log</li>
</ol>
</div>

<hr>

<h2>10. Frequently Asked Questions</h2>

<h3>Q: What baudrate should I use?</h3>
<p><strong>A:</strong> Version 2.0 defaults to 115200. If issues occur, match your equipment's baudrate (check manual). Common alternatives: 57600, 38400, 19200, 9600.</p>

<h3>Q: Why am I getting parse errors?</h3>
<p><strong>A:</strong> Usually indicates baudrate mismatch, wrong data format, or connection quality issues. Check Raw_Data column in CSV to see actual received data.</p>

<h3>Q: How long can a test run?</h3>
<p><strong>A:</strong> No time limit. Version 2.0 supports unlimited data points. Monitor memory usage for multi-day tests.</p>

<h3>Q: Can negative forces be logged?</h3>
<p><strong>A:</strong> Yes, version 2.0 fully supports negative values for force and position.</p>

<h3>Q: What is "Loss of Stiffness"?</h3>
<p><strong>A:</strong> Calculated as (Travel_2 / Travel_at_Upper) × 100%. Indicates material degradation. Increasing trend shows fatigue damage.</p>

<hr>

<h2>11. Advanced Features</h2>

<h3>11.1 Statistics Monitoring</h3>
<ul>
    <li><strong>Connection Time:</strong> Elapsed since connection</li>
    <li><strong>Lines Received:</strong> Total raw data lines</li>
    <li><strong>Points Logged:</strong> Successfully parsed points</li>
    <li><strong>Points Plotted:</strong> Currently displayed</li>
    <li><strong>Parse Errors:</strong> Invalid data lines</li>
</ul>

<h3>11.2 Loss of Stiffness Formula</h3>
<pre>
Loss_of_Stiffness [%] = (Travel_2 / Travel_at_Upper) × 100

Where:
  Travel_2 = Additional travel to reach Upper Force [mm]
  Travel_at_Upper = Total travel at Upper Force [mm]
  
Special case: If Travel_at_Upper = 0, returns 0%
</pre>

<hr>

<h2>12. Technical Information</h2>

<h3>12.1 Dependencies</h3>
<ul>
    <li>pyserial >= 3.5</li>
    <li>PyQt5 >= 5.15.0</li>
    <li>pyqtgraph >= 0.13.0</li>
    <li>pandas >= 1.5.0</li>
    <li>numpy >= 1.23.0</li>
</ul>

<h3>12.2 Performance</h3>
<ul>
    <li>Maximum data rate: 10 Hz</li>
    <li>Memory usage: ~1 MB per 10,000 points</li>
    <li>CPU usage: Typically < 10%</li>
</ul>

<hr>

<h2>Contact and Support</h2>
<p><strong>Contacts:</strong> Uwe Hasenstab and Alexander Waal</p>
<p><strong>Version:</strong> 2.0 | February 2026</p>

<hr>

<p style="text-align: center; margin-top: 30px;">
    <em>End of User Manual</em><br>
    Serial Data Logger and Plotter v2.0<br>
    © 2026
</p>

</body>
</html>
